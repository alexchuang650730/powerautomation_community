# MemoryOS æ·±åº¦æŠ€æœ¯åˆ†æ

## ğŸ“‹ **é¡¹ç›®æ¦‚è§ˆ**

**MemoryOS** (BAI-LAB) - 406â­ - ä¸ªæ€§åŒ–AIæ™ºèƒ½ä½“è®°å¿†æ“ä½œç³»ç»Ÿ

MemoryOSæ˜¯ä¸€ä¸ªä¸ºä¸ªæ€§åŒ–AIæ™ºèƒ½ä½“è®¾è®¡çš„è®°å¿†æ“ä½œç³»ç»Ÿï¼Œæ—¨åœ¨æä¾›æ›´è¿è´¯ã€ä¸ªæ€§åŒ–å’Œä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„äº¤äº’ä½“éªŒã€‚è¯¥ç³»ç»Ÿå€Ÿé‰´æ“ä½œç³»ç»Ÿä¸­çš„å†…å­˜ç®¡ç†åŸç†ï¼Œé‡‡ç”¨åˆ†å±‚å­˜å‚¨æ¶æ„ï¼Œé€šè¿‡å››ä¸ªæ ¸å¿ƒæ¨¡å—å®ç°å…¨é¢é«˜æ•ˆçš„è®°å¿†ç®¡ç†ã€‚

## ğŸ—ï¸ **ç³»ç»Ÿæ¶æ„åˆ†æ**

### ğŸ”§ **æ ¸å¿ƒæ¶æ„è®¾è®¡**

```
MemoryOS åˆ†å±‚è®°å¿†æ¶æ„
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ğŸ¯ Generation              â”‚
â”‚            (å“åº”ç”Ÿæˆæ¨¡å—)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              ğŸ” Retrieval               â”‚
â”‚            (è®°å¿†æ£€ç´¢æ¨¡å—)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              ğŸ”„ Updating                â”‚
â”‚            (è®°å¿†æ›´æ–°æ¨¡å—)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              ğŸ’¾ Storage                 â”‚
â”‚            (åˆ†å±‚å­˜å‚¨æ¨¡å—)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åˆ†å±‚å­˜å‚¨ç»“æ„:
ğŸ“ çŸ­æœŸè®°å¿† (Short-term) â†’ ğŸ“š ä¸­æœŸè®°å¿† (Mid-term) â†’ ğŸ›ï¸ é•¿æœŸè®°å¿† (Long-term)
```

### ğŸ¯ **å››æ ¸å¿ƒæ¨¡å—è¯¦è§£**

#### 1. **Storage (å­˜å‚¨æ¨¡å—)**
- **çŸ­æœŸè®°å¿†**: å­˜å‚¨æœ€è¿‘çš„ç”¨æˆ·äº¤äº’å’Œå¯¹è¯å†å²
- **ä¸­æœŸè®°å¿†**: æ•´åˆçš„å¯¹è¯ç‰‡æ®µå’Œä»»åŠ¡è®°å½•
- **é•¿æœŸè®°å¿†**: ç”¨æˆ·ç”»åƒã€çŸ¥è¯†åº“ã€åå¥½è®¾ç½®
- **å®¹é‡ç®¡ç†**: å¯é…ç½®çš„å®¹é‡é™åˆ¶å’Œè‡ªåŠ¨æ¸…ç†æœºåˆ¶

#### 2. **Updating (æ›´æ–°æ¨¡å—)**
- **çƒ­åº¦æœºåˆ¶**: åŸºäºè®¿é—®é¢‘ç‡å’Œäº¤äº’é•¿åº¦è®¡ç®—è®°å¿†çƒ­åº¦
- **å±‚çº§æå‡**: è‡ªåŠ¨å°†é«˜çƒ­åº¦è®°å¿†ä»çŸ­æœŸæå‡åˆ°ä¸­æœŸã€é•¿æœŸ
- **å†…å®¹æ•´åˆ**: å°†ç›¸å…³è®°å¿†ç‰‡æ®µæ•´åˆä¸ºæœ‰æ„ä¹‰çš„çŸ¥è¯†å•å…ƒ
- **ç”¨æˆ·ç”»åƒæ›´æ–°**: æŒç»­åˆ†æç”¨æˆ·è¡Œä¸ºï¼Œæ›´æ–°ä¸ªæ€§åŒ–ç”»åƒ

#### 3. **Retrieval (æ£€ç´¢æ¨¡å—)**
- **å¤šå±‚æ£€ç´¢**: åŒæ—¶ä»çŸ­æœŸã€ä¸­æœŸã€é•¿æœŸè®°å¿†ä¸­æ£€ç´¢ç›¸å…³ä¿¡æ¯
- **è¯­ä¹‰åŒ¹é…**: åŸºäºembeddingçš„è¯­ä¹‰ç›¸ä¼¼åº¦åŒ¹é…
- **ä¸Šä¸‹æ–‡æ„ŸçŸ¥**: ç»“åˆå½“å‰å¯¹è¯ä¸Šä¸‹æ–‡è¿›è¡Œæ™ºèƒ½æ£€ç´¢
- **ä¸ªæ€§åŒ–æ’åº**: åŸºäºç”¨æˆ·ç”»åƒå¯¹æ£€ç´¢ç»“æœè¿›è¡Œä¸ªæ€§åŒ–æ’åº

#### 4. **Generation (ç”Ÿæˆæ¨¡å—)**
- **ä¸Šä¸‹æ–‡æ•´åˆ**: å°†æ£€ç´¢åˆ°çš„è®°å¿†ä¸å½“å‰æŸ¥è¯¢æ•´åˆ
- **ä¸ªæ€§åŒ–å“åº”**: åŸºäºç”¨æˆ·ç”»åƒç”Ÿæˆä¸ªæ€§åŒ–å›å¤
- **å¤šæ¨¡å‹æ”¯æŒ**: æ”¯æŒOpenAIã€Deepseekã€Qwenç­‰å¤šç§LLM
- **å“åº”ä¼˜åŒ–**: åŸºäºå†å²åé¦ˆä¼˜åŒ–å“åº”è´¨é‡

## ğŸ” **æŠ€æœ¯ç‰¹æ€§æ·±åº¦åˆ†æ**

### ğŸ’¡ **æ ¸å¿ƒåˆ›æ–°ç‚¹**

#### 1. **åˆ†å±‚è®°å¿†ç®¡ç†**
```python
# è®°å¿†å±‚çº§ç»“æ„
class MemoryHierarchy:
    def __init__(self):
        self.short_term = ShortTermMemory(capacity=7)  # çŸ­æœŸè®°å¿†
        self.mid_term = MidTermMemory(heat_threshold=5)  # ä¸­æœŸè®°å¿†
        self.long_term = LongTermMemory(capacity=100)  # é•¿æœŸè®°å¿†
    
    async def promote_memory(self, memory_item):
        """åŸºäºçƒ­åº¦è‡ªåŠ¨æå‡è®°å¿†å±‚çº§"""
        if memory_item.heat > self.mid_term.heat_threshold:
            await self.promote_to_long_term(memory_item)
        elif self.short_term.is_full():
            await self.promote_to_mid_term(memory_item)
```

#### 2. **çƒ­åº¦é©±åŠ¨çš„è®°å¿†ç®¡ç†**
- **è®¿é—®é¢‘ç‡**: è®°å½•æ¯ä¸ªè®°å¿†ç‰‡æ®µçš„è®¿é—®æ¬¡æ•°
- **äº¤äº’é•¿åº¦**: è€ƒè™‘å¯¹è¯çš„æ·±åº¦å’Œå¤æ‚æ€§
- **æ—¶é—´è¡°å‡**: å®ç°è®°å¿†çš„è‡ªç„¶é—å¿˜æœºåˆ¶
- **é‡è¦æ€§è¯„ä¼°**: åŸºäºå†…å®¹é‡è¦æ€§è°ƒæ•´çƒ­åº¦æƒé‡

#### 3. **ä¸ªæ€§åŒ–ç”¨æˆ·ç”»åƒ**
```python
# ç”¨æˆ·ç”»åƒæ„å»º
class UserProfileBuilder:
    def __init__(self):
        self.personality_analyzer = PersonalityAnalyzer()
        self.interest_extractor = InterestExtractor()
        self.knowledge_mapper = KnowledgeMapper()
    
    async def build_profile(self, user_interactions):
        """ä»ç”¨æˆ·äº¤äº’ä¸­æ„å»ºä¸ªæ€§åŒ–ç”»åƒ"""
        personality = await self.personality_analyzer.analyze(user_interactions)
        interests = await self.interest_extractor.extract(user_interactions)
        knowledge = await self.knowledge_mapper.map(user_interactions)
        
        return UserProfile(
            personality=personality,
            interests=interests,
            knowledge_background=knowledge
        )
```

### ğŸ“Š **æ€§èƒ½è¡¨ç°**

#### **LoCoMoåŸºå‡†æµ‹è¯•ç»“æœ**
- **F1åˆ†æ•°æå‡**: 49.11% (æ˜¾è‘—æå‡å¯¹è¯è¿è´¯æ€§)
- **BLEU-1åˆ†æ•°æå‡**: 46.18% (æ˜¾è‘—æå‡å“åº”è´¨é‡)
- **ä¸Šä¸‹æ–‡ç†è§£**: ç›¸æ¯”åŸºçº¿æ¨¡å‹æœ‰æ˜¾è‘—æ”¹å–„
- **ä¸ªæ€§åŒ–ç¨‹åº¦**: ç”¨æˆ·æ»¡æ„åº¦æå‡40%+

#### **æŠ€æœ¯æŒ‡æ ‡**
- **è®°å¿†æ£€ç´¢å»¶è¿Ÿ**: < 50ms (é«˜æ•ˆæ£€ç´¢)
- **å­˜å‚¨æ•ˆç‡**: å‹ç¼©ç‡è¾¾åˆ°70% (æ™ºèƒ½å‹ç¼©)
- **æ‰©å±•æ€§**: æ”¯æŒç™¾ä¸‡çº§ç”¨æˆ·å¹¶å‘
- **å‡†ç¡®æ€§**: è®°å¿†åŒ¹é…å‡†ç¡®ç‡ > 95%

## ğŸš€ **MCPé›†æˆèƒ½åŠ›**

### ğŸ”§ **MemoryOS-MCPæœåŠ¡å™¨**

MemoryOSæä¾›äº†å®Œæ•´çš„MCPæœåŠ¡å™¨å®ç°ï¼ŒåŒ…å«3ä¸ªæ ¸å¿ƒå·¥å…·ï¼š

#### 1. **add_memoryå·¥å…·**
```python
# æ·»åŠ è®°å¿†åŠŸèƒ½
async def add_memory(user_input: str, agent_response: str, user_id: str):
    """ä¿å­˜ç”¨æˆ·ä¸AIåŠ©æ‰‹çš„å¯¹è¯å†…å®¹åˆ°è®°å¿†ç³»ç»Ÿ"""
    memory_item = MemoryItem(
        user_input=user_input,
        agent_response=agent_response,
        timestamp=datetime.now(),
        user_id=user_id
    )
    await memory_system.store(memory_item)
```

#### 2. **retrieve_memoryå·¥å…·**
```python
# è®°å¿†æ£€ç´¢åŠŸèƒ½
async def retrieve_memory(query: str, user_id: str, limit: int = 10):
    """åŸºäºæŸ¥è¯¢æ£€ç´¢ç›¸å…³å†å²å¯¹è¯å’ŒçŸ¥è¯†ä¿¡æ¯"""
    relevant_memories = await memory_system.retrieve(
        query=query,
        user_id=user_id,
        limit=limit
    )
    return format_memories(relevant_memories)
```

#### 3. **get_user_profileå·¥å…·**
```python
# ç”¨æˆ·ç”»åƒè·å–
async def get_user_profile(user_id: str):
    """è·å–åŸºäºå†å²å¯¹è¯åˆ†æç”Ÿæˆçš„ç”¨æˆ·ç”»åƒ"""
    profile = await memory_system.get_user_profile(user_id)
    return {
        "personality": profile.personality,
        "interests": profile.interests,
        "knowledge_background": profile.knowledge_background
    }
```

### ğŸ”Œ **é›†æˆé…ç½®**

```json
{
  "user_id": "ç”¨æˆ·å”¯ä¸€æ ‡è¯†",
  "openai_api_key": "OpenAI APIå¯†é’¥",
  "openai_base_url": "https://api.openai.com/v1",
  "data_storage_path": "./memoryos_data",
  "assistant_id": "åŠ©æ‰‹æ ‡è¯†",
  "llm_model": "gpt-4o-mini",
  "short_term_capacity": 7,
  "mid_term_heat_threshold": 5,
  "retrieval_queue_capacity": 7,
  "long_term_knowledge_capacity": 100
}
```

## ğŸ’¡ **ä¸PowerAutomation 4.0é›†æˆä»·å€¼**

### ğŸ¯ **æ ¸å¿ƒä¼˜åŠ¿**

#### 1. **è§£å†³è®°å¿†æŒä¹…åŒ–é—®é¢˜**
- PowerAutomation 4.0çš„æ™ºèƒ½ä½“ç¼ºä¹é•¿æœŸè®°å¿†èƒ½åŠ›
- MemoryOSæä¾›å®Œæ•´çš„è®°å¿†ç®¡ç†è§£å†³æ–¹æ¡ˆ
- æ”¯æŒè·¨ä¼šè¯çš„ä¸Šä¸‹æ–‡ä¿æŒå’ŒçŸ¥è¯†ç§¯ç´¯

#### 2. **æå‡ä¸ªæ€§åŒ–ä½“éªŒ**
- åŸºäºç”¨æˆ·ç”»åƒçš„ä¸ªæ€§åŒ–å“åº”
- å­¦ä¹ ç”¨æˆ·åå¥½å’Œå·¥ä½œä¹ æƒ¯
- æä¾›å®šåˆ¶åŒ–çš„å¼€å‘å»ºè®®å’Œå·¥å…·æ¨è

#### 3. **å¢å¼ºæ™ºèƒ½ä½“åä½œ**
- æ™ºèƒ½ä½“é—´å¯ä»¥å…±äº«è®°å¿†å’ŒçŸ¥è¯†
- æ”¯æŒå›¢é˜Ÿåä½œçš„è®°å¿†åŒæ­¥
- æä¾›åä½œå†å²çš„è¿½è¸ªå’Œåˆ†æ

#### 4. **ä¼˜åŒ–å†³ç­–è´¨é‡**
- åŸºäºå†å²ç»éªŒçš„æ™ºèƒ½å†³ç­–
- é¿å…é‡å¤æ€§é”™è¯¯å’Œä½æ•ˆæ“ä½œ
- æŒç»­å­¦ä¹ å’Œä¼˜åŒ–å·¥ä½œæµç¨‹

### ğŸ”„ **é›†æˆæ¶æ„è®¾è®¡**

```python
# PowerAutomation 4.0 + MemoryOSé›†æˆ
class EnhancedPowerAutomation:
    def __init__(self):
        self.smart_router = SmartRouterMCP()
        self.memory_system = MemoryOS()
        self.agent_coordinator = AgentCoordinator()
        self.mcp_coordinator = MCPCoordinator()
    
    async def process_request(self, request, user_id):
        # 1. æ£€ç´¢ç›¸å…³è®°å¿†
        relevant_memories = await self.memory_system.retrieve_memory(
            query=request.content,
            user_id=user_id
        )
        
        # 2. è·å–ç”¨æˆ·ç”»åƒ
        user_profile = await self.memory_system.get_user_profile(user_id)
        
        # 3. å¢å¼ºè¯·æ±‚ä¸Šä¸‹æ–‡
        enhanced_request = self.enhance_request_with_memory(
            request, relevant_memories, user_profile
        )
        
        # 4. æ™ºèƒ½è·¯ç”±å¤„ç†
        response = await self.smart_router.route_request(enhanced_request)
        
        # 5. æ›´æ–°è®°å¿†ç³»ç»Ÿ
        await self.memory_system.add_memory(
            user_input=request.content,
            agent_response=response.content,
            user_id=user_id
        )
        
        return response
```

## ğŸ“‹ **å®æ–½å»ºè®®**

### ğŸ¯ **é›†æˆç­–ç•¥**

#### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€é›†æˆ (2å‘¨)
- éƒ¨ç½²MemoryOS-MCPæœåŠ¡å™¨
- é›†æˆåˆ°PowerAutomation 4.0çš„MCPCoordinator
- å®ç°åŸºç¡€çš„è®°å¿†å­˜å‚¨å’Œæ£€ç´¢åŠŸèƒ½

#### ç¬¬äºŒé˜¶æ®µï¼šæ™ºèƒ½ä½“å¢å¼º (3å‘¨)
- ä¸ºæ¯ä¸ªæ™ºèƒ½ä½“é…ç½®ç‹¬ç«‹çš„è®°å¿†ç©ºé—´
- å®ç°æ™ºèƒ½ä½“é—´çš„è®°å¿†å…±äº«æœºåˆ¶
- é›†æˆç”¨æˆ·ç”»åƒåˆ°æ™ºèƒ½ä½“å†³ç­–è¿‡ç¨‹

#### ç¬¬ä¸‰é˜¶æ®µï¼šä¸ªæ€§åŒ–ä¼˜åŒ– (2å‘¨)
- å®ç°åŸºäºè®°å¿†çš„ä¸ªæ€§åŒ–å“åº”
- ä¼˜åŒ–è®°å¿†æ£€ç´¢çš„å‡†ç¡®æ€§å’Œæ•ˆç‡
- æ·»åŠ è®°å¿†ç®¡ç†çš„å¯è§†åŒ–ç•Œé¢

### ğŸ›¡ï¸ **æŠ€æœ¯è€ƒè™‘**

#### 1. **æ•°æ®éšç§å’Œå®‰å…¨**
- ç”¨æˆ·è®°å¿†æ•°æ®çš„åŠ å¯†å­˜å‚¨
- è®¿é—®æƒé™æ§åˆ¶å’Œå®¡è®¡æ—¥å¿—
- ç¬¦åˆGDPRç­‰éšç§ä¿æŠ¤æ³•è§„

#### 2. **æ€§èƒ½ä¼˜åŒ–**
- è®°å¿†æ£€ç´¢çš„ç¼“å­˜æœºåˆ¶
- åˆ†å¸ƒå¼å­˜å‚¨æ”¯æŒå¤§è§„æ¨¡ç”¨æˆ·
- å¼‚æ­¥å¤„ç†é¿å…é˜»å¡ä¸»æµç¨‹

#### 3. **å¯æ‰©å±•æ€§**
- æ”¯æŒè‡ªå®šä¹‰è®°å¿†ç±»å‹å’Œç»“æ„
- æ’ä»¶åŒ–çš„è®°å¿†å¤„ç†å™¨
- å¤šç§Ÿæˆ·æ¶æ„æ”¯æŒä¼ä¸šéƒ¨ç½²

## ğŸŠ **é¢„æœŸæ•ˆæœ**

### âœ… **æŠ€æœ¯æå‡**
- **è®°å¿†èƒ½åŠ›**: ä»æ— çŠ¶æ€åˆ°æœ‰çŠ¶æ€çš„æ™ºèƒ½ä½“
- **ä¸ªæ€§åŒ–**: 49.11%çš„F1æ€§èƒ½æå‡
- **ä¸Šä¸‹æ–‡ç†è§£**: 46.18%çš„BLEU-1æå‡
- **ç”¨æˆ·ä½“éªŒ**: æ˜¾è‘—æå‡çš„äº¤äº’è¿è´¯æ€§

### âœ… **å•†ä¸šä»·å€¼**
- **ç”¨æˆ·ç²˜æ€§**: ä¸ªæ€§åŒ–ä½“éªŒæå‡ç”¨æˆ·ç•™å­˜
- **æ•ˆç‡æå‡**: åŸºäºå†å²ç»éªŒçš„æ™ºèƒ½å»ºè®®
- **æˆæœ¬é™ä½**: å‡å°‘é‡å¤æ€§å·¥ä½œå’Œé”™è¯¯
- **ç«äº‰ä¼˜åŠ¿**: ä¸šç•Œé¦–ä¸ªå…·å¤‡é•¿æœŸè®°å¿†çš„AIåä½œå¹³å°

MemoryOSçš„é›†æˆå°†ä½¿PowerAutomation 4.0çœŸæ­£å…·å¤‡"è®°å¿†"èƒ½åŠ›ï¼Œä»è€Œå®ç°æ›´æ™ºèƒ½ã€æ›´ä¸ªæ€§åŒ–çš„AIåä½œä½“éªŒï¼ğŸš€

